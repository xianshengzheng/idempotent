## idempotent
一个简单，灵活，扩展性强，可以自定义存储格式的 **幂等** 框架。

### 实现原理
基本原理是拿到每次请求的幂等值，存储下来，当相同幂等值的请求再次请求的时候。

会根据策略，决定是抛出异常，还是将上次执行的结果直接返回。

基于 Spring AOP，对代码最小侵入方式来实现幂等。使用注解的形式来实现幂等。

同时引入EL表达式，可以指定方法参数某一值作为幂等值。

### 扩展策略

1. 存储
> 默认基于Redis存储幂等值和放回结果。
> 
> 实现 IdempotenceStorage 可自定义存储方式。

2. 错误策略
> 1. 业务错误
> 业务错误目前默认是抛出异常 RejectedException, 后续将由开发人员自己决定是抛出异常还是正常包持幂等。
> 
> 2. 机器宕机 
> 通过两段式设置过期时间来实现
> 
> 3. 幂等框架异常
> 直接抛出异常错误

### 流程图


![image](https://user-images.githubusercontent.com/35193008/112266923-aa582180-8caf-11eb-95c4-b74c64dab454.png)


